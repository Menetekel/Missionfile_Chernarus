private["_target","_l0","_l1"];_target=_this select 0;_l0=_this select 1;_l1=_this select 2;_l2=_this select 3;_l3=_l2 select 0;if(isNil"ib_refueling_in_progress")then{ib_refueling_in_progress=false;};if(!ib_refueling_in_progress)then{ib_refueling_in_progress=true;titleText["Refueling(Unpowered)","PLAIN DOWN",3];while{(vehicle _l0==_target)and(local _target)}do{private["_l4","_l5"];_l4=velocity _target;_l5=fuel _target;if((_l4 select 0>1)or(_l4 select 1>1)or(_l4 select 2>1))exitWith{titleText["Refueling Stopped","PLAIN DOWN",3];};if(_l5>=1.0)exitWith{titleText["Done Refueling","PLAIN DOWN",3];};sleep 0.5;_l5=_l5+_l3;if(_l5>=1.0)then{_l5=1.0;};_target setFuel _l5;};titleFadeOut 1;ib_refueling_in_progress=false;};