private["_l0","_l1","_l2","_l3"];disableSerialization;if(isNil"inSafezone")then{inSafezone=false;};_l2=(_this select 0);_l3=(vehicle player)!=player;_l0=cursorTarget;if(_l3)then{_l0=(vehicle player);};_l1=false;{if(!_l1)then{_l1=_l0 isKindOf _x;};}forEach["LandVehicle","Air","Ship"];if((locked _l0)and _l1 and(((vehicle player)distance _l0)<12))then{cutText["Cannot access gear in a locked vehicle!","PLAIN DOWN"];_l2 closeDisplay 1;};if((_l0 isKindOf"Man")&&(alive _l0)&&!(isNull unitBackpack _l0)&&(player distance _l0<5)&&!_l3 && inSafeZone)then{_l4=player getVariable["friendlyTo",[]];_l5=_l0 getVariable["CharacterID","0"];_l6=_l0 getVariable["friendlyTo",[]];_l7=player getVariable["CharacterID","0"];if!((_l5 in _l4)and(_l7 in _l6))then{cutText["Cannot access gear from other players in a safezone!\n Tag your tag your friend as'friendly'to get access to his gear!","PLAIN DOWN"];_l2 closeDisplay 1;};};